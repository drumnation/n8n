version: '3.8'

# Simple n8n deployment with SQLite and AI support
# Quick start: docker-compose -f docker-compose.simple.yml up -d

services:
  n8n:
    image: docker.n8n.io/n8nio/n8n:latest
    restart: always
    ports:
      - "5679:5678"
    environment:
      # AI Configuration - Set your Anthropic API key
      - N8N_AI_ANTHROPIC_KEY=${N8N_AI_ANTHROPIC_KEY:-}

      # Basic Configuration
      - N8N_PORT=5678
      - N8N_PROTOCOL=http
      - N8N_HOST=localhost
      - N8N_EDITOR_BASE_URL=http://localhost:5678

      # Database (SQLite - simplest setup)
      - DB_TYPE=sqlite

      # Security (CHANGE THESE for production!)
      - N8N_ENCRYPTION_KEY=39468e235d00391756da2cc02c32b8cb86f02d9287bd7883c882fb57ba418e3b
      - N8N_USER_MANAGEMENT_JWT_SECRET=simple-jwt-secret-change-me

      # Feature Flags
      - N8N_DIAGNOSTICS_ENABLED=true
      - N8N_PERSONALIZATION_ENABLED=true

    volumes:
      - n8n_data:/home/node/.n8n
    command: start

volumes:
  n8n_data:
    driver: local
